---
title: API Reference
description: Complete API documentation
author: zoobzio
published: 2025-12-30
updated: 2025-12-30
tags:
  - Reference
  - API
---

# API Reference

Complete reference for the VECTQL package.

## Package Import

```go
import "github.com/zoobzio/vectql"
import "github.com/zoobzio/vectql/pkg/pinecone"
```

---

## Instance

### NewFromVDML

Creates a VECTQL instance from a VDML schema.

```go
func NewFromVDML(schema *vdml.Schema) (*VECTQL, error)
```

**Returns:** Instance bound to schema, or error if schema is invalid.

---

## Accessors

### C

Returns a validated collection reference.

```go
func (v *VECTQL) C(name string) Collection
```

**Panics:** If collection doesn't exist in schema.

### TryC

Returns a validated collection reference or error.

```go
func (v *VECTQL) TryC(name string) (Collection, error)
```

### E

Returns a validated embedding field reference.

```go
func (v *VECTQL) E(collection, name string) EmbeddingField
```

**Panics:** If embedding doesn't exist in collection.

### TryE

Returns a validated embedding field reference or error.

```go
func (v *VECTQL) TryE(collection, name string) (EmbeddingField, error)
```

### M

Returns a validated metadata field reference.

```go
func (v *VECTQL) M(collection, name string) MetadataField
```

**Panics:** If metadata field doesn't exist in collection.

### TryM

Returns a validated metadata field reference or error.

```go
func (v *VECTQL) TryM(collection, name string) (MetadataField, error)
```

### P

Returns a validated parameter reference.

```go
func (v *VECTQL) P(name string) Param
```

**Panics:** If parameter name is invalid.

### TryP

Returns a validated parameter reference or error.

```go
func (v *VECTQL) TryP(name string) (Param, error)
```

---

## Query Starters

### Search

Creates a similarity search query.

```go
func Search(c Collection) *Builder
```

### Upsert

Creates an upsert (insert/update) query.

```go
func Upsert(c Collection) *Builder
```

### Delete

Creates a delete query.

```go
func Delete(c Collection) *Builder
```

### Fetch

Creates a fetch-by-ID query.

```go
func Fetch(c Collection) *Builder
```

### Update

Creates a metadata update query.

```go
func Update(c Collection) *Builder
```

---

## Builder Methods - Search

### Vector

Sets the query vector.

```go
func (b *Builder) Vector(v VectorValue) *Builder
```

### Embedding

Specifies which embedding field to search.

```go
func (b *Builder) Embedding(e EmbeddingField) *Builder
```

### TopK

Sets the number of results to return.

```go
func (b *Builder) TopK(k int) *Builder
```

### TopKParam

Sets topK from a parameter.

```go
func (b *Builder) TopKParam(p Param) *Builder
```

### MinScore

Sets a minimum similarity threshold.

```go
func (b *Builder) MinScore(p Param) *Builder
```

### Filter

Adds a metadata filter.

```go
func (b *Builder) Filter(f FilterItem) *Builder
```

### Where

Alias for Filter.

```go
func (b *Builder) Where(f FilterItem) *Builder
```

### SelectMetadata

Specifies which metadata fields to return.

```go
func (b *Builder) SelectMetadata(fields ...MetadataField) *Builder
```

### IncludeMetadata

Whether to include metadata in results.

```go
func (b *Builder) IncludeMetadata(include bool) *Builder
```

### IncludeVectors

Whether to include vectors in results.

```go
func (b *Builder) IncludeVectors(include bool) *Builder
```

### Namespace

Sets the namespace for the operation.

```go
func (b *Builder) Namespace(ns Param) *Builder
```

---

## Builder Methods - Upsert

### AddVector

Adds a vector record to upsert.

```go
func (b *Builder) AddVector(record VectorRecord) *Builder
```

### Vectors

Sets multiple vector records to upsert.

```go
func (b *Builder) Vectors(records []VectorRecord) *Builder
```

---

## Builder Methods - Delete

### IDs

Sets IDs for delete/fetch/update operations. Accepts variadic parameters.

```go
func (b *Builder) IDs(ids ...Param) *Builder
```

### DeleteAll

Enables deletion of all vectors matching the filter (in namespace if specified).

```go
func (b *Builder) DeleteAll() *Builder
```

---

## Builder Methods - Update

### Set

Sets a metadata field value.

```go
func (b *Builder) Set(field MetadataField, value Param) *Builder
```

---

## Rendering

### Render

Renders the query using the specified provider.

```go
func (b *Builder) Render(r Renderer) (*QueryResult, error)
```

### MustRender

Renders the query, panicking on error.

```go
func (b *Builder) MustRender(r Renderer) *QueryResult
```

---

## Vector Constructors

### Vec

Creates a dense vector value from a parameter.

```go
func Vec(p Param) VectorValue
```

### SparseVec

Creates a sparse vector value from a parameter.

```go
func SparseVec(p Param) SparseVectorValue
```

### VecLiteral

Creates a dense vector value from literal float values.

```go
func VecLiteral(values []float32) VectorValue
```

### SparseVecLiteral

Creates a sparse vector value from literal index and value arrays.

```go
func SparseVecLiteral(indices []int, values []float32) SparseVectorValue
```

---

## Record Builder

### NewRecord

Creates a new vector record builder.

```go
func NewRecord(id Param, vector VectorValue) *VectorRecordBuilder
```

### WithMetadata

Adds metadata to the record.

```go
func (rb *VectorRecordBuilder) WithMetadata(field MetadataField, value Param) *VectorRecordBuilder
```

### WithSparseVector

Adds a sparse vector to the record.

```go
func (rb *VectorRecordBuilder) WithSparseVector(sv SparseVectorValue) *VectorRecordBuilder
```

### Build

Returns the built vector record.

```go
func (rb *VectorRecordBuilder) Build() VectorRecord
```

---

## Filter Constructors

### Comparison

```go
func (v *VECTQL) Eq(field MetadataField, value Param) FilterItem
func (v *VECTQL) Ne(field MetadataField, value Param) FilterItem
func (v *VECTQL) Gt(field MetadataField, value Param) FilterItem
func (v *VECTQL) Gte(field MetadataField, value Param) FilterItem
func (v *VECTQL) Lt(field MetadataField, value Param) FilterItem
func (v *VECTQL) Lte(field MetadataField, value Param) FilterItem
```

### Set Membership

```go
func (v *VECTQL) In(field MetadataField, value Param) FilterItem
func (v *VECTQL) NotIn(field MetadataField, value Param) FilterItem
```

### Logical

```go
func (v *VECTQL) And(conditions ...FilterItem) FilterItem
func (v *VECTQL) Or(conditions ...FilterItem) FilterItem
func (v *VECTQL) Not(condition FilterItem) FilterItem
```

### Package-Level Filters

```go
func Exists(field MetadataField) FilterItem
func NotExists(field MetadataField) FilterItem
func Range(field MetadataField, min, max *Param) FilterItem
func RangeExclusive(field MetadataField, min, max *Param) FilterItem
func Contains(field MetadataField, value Param) FilterItem
func StartsWith(field MetadataField, value Param) FilterItem
func EndsWith(field MetadataField, value Param) FilterItem
func ArrayContains(field MetadataField, value Param) FilterItem
func ArrayContainsAny(field MetadataField, value Param) FilterItem
func ArrayContainsAll(field MetadataField, value Param) FilterItem
func Geo(field MetadataField, lat, lon, radius Param) FilterItem
```

---

## Types

### QueryResult

Result from rendering a query.

```go
type QueryResult struct {
    JSON           string   // Rendered query as JSON
    RequiredParams []string // Parameters that must be provided
}
```

### Operation

Query operation type.

```go
type Operation string

const (
    OpSearch Operation = "SEARCH"
    OpUpsert Operation = "UPSERT"
    OpDelete Operation = "DELETE"
    OpFetch  Operation = "FETCH"
    OpUpdate Operation = "UPDATE"
)
```

### DistanceMetric

Distance metric for similarity.

```go
type DistanceMetric string

const (
    MetricCosine     DistanceMetric = "cosine"
    MetricEuclidean  DistanceMetric = "euclidean"
    MetricDotProduct DistanceMetric = "dotProduct"
)
```

---

## Renderer Interface

```go
type Renderer interface {
    Render(ast *VectorAST) (*QueryResult, error)
    SupportsOperation(op Operation) bool
    SupportsFilter(op FilterOperator) bool
}
```

---

## Providers

### Pinecone

```go
import "github.com/zoobzio/vectql/pkg/pinecone"

renderer := pinecone.New()
```

### Qdrant

```go
import "github.com/zoobzio/vectql/pkg/qdrant"

renderer := qdrant.New()
```

### Milvus

```go
import "github.com/zoobzio/vectql/pkg/milvus"

renderer := milvus.New()
```

### Weaviate

```go
import "github.com/zoobzio/vectql/pkg/weaviate"

renderer := weaviate.New()
```
