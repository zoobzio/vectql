---
title: Concepts
description: Core concepts in VECTQL
author: zoobzio
published: 2025-12-30
updated: 2025-12-30
tags:
  - Learn
  - Concepts
  - Fundamentals
---

# Concepts

Understanding the core concepts in VECTQL.

## Collections

A collection is a container for vectors with associated metadata. In VECTQL, collections map to provider-specific constructs:

| Provider | Collection Maps To |
|----------|-------------------|
| Pinecone | Index + Namespace |
| Qdrant | Collection |
| Milvus | Collection |
| Weaviate | Class |

```go
// Define in VDML
products := vdml.NewCollection("products")

// Access through instance
collection := v.C("products")
```

## Embeddings

Embeddings are vector representations of data. Each collection can have multiple embedding fields:

```go
// Define embeddings in VDML
products := vdml.NewCollection("products").
    AddEmbedding(vdml.NewEmbedding("text_embedding", 1536).WithMetric(vdml.Cosine)).
    AddEmbedding(vdml.NewEmbedding("image_embedding", 512).WithMetric(vdml.Euclidean))

// Access through instance
textEmb := v.E("products", "text_embedding")
imageEmb := v.E("products", "image_embedding")
```

### Dimensions

Vector dimensions must match your embedding model:

| Model | Dimensions |
|-------|------------|
| OpenAI text-embedding-3-small | 1536 |
| OpenAI text-embedding-3-large | 3072 |
| Cohere embed-v3 | 1024 |
| Sentence Transformers | 384-768 |

### Distance Metrics

| Metric | Use Case | Range |
|--------|----------|-------|
| Cosine | Text similarity | -1 to 1 |
| Euclidean | Image similarity | 0 to ∞ |
| DotProduct | Normalized vectors | -∞ to ∞ |

## Metadata Fields

Metadata fields store structured data alongside vectors:

```go
// Define in VDML
products.AddMetadata(vdml.NewMetadataField("category", vdml.TypeString))
products.AddMetadata(vdml.NewMetadataField("price", vdml.TypeFloat))
products.AddMetadata(vdml.NewMetadataField("tags", vdml.TypeStringArray))

// Access through instance
category := v.M("products", "category")
price := v.M("products", "price")
```

### Supported Types

| VDML Type | Go Type | Description |
|-----------|---------|-------------|
| TypeString | string | Text values |
| TypeInt | int64 | Integer values |
| TypeFloat | float64 | Floating point |
| TypeBool | bool | Boolean |
| TypeStringArray | []string | String arrays |
| TypeIntArray | []int64 | Integer arrays |

## Parameters

Parameters are placeholders for runtime values:

```go
// Create parameters
queryVec := v.P("query_vec")
category := v.P("category")
minPrice := v.P("min_price")

// Use in queries
vectql.Search(collection).
    Vector(vectql.Vec(queryVec)).
    Filter(v.And(
        v.Eq(v.M("products", "category"), category),
        v.Gt(v.M("products", "price"), minPrice),
    ))
```

Parameters appear in `result.RequiredParams` after rendering.

## Vectors

Vector values represent the actual embeddings:

```go
// Parameterized vector (common)
vec := vectql.Vec(v.P("query_embedding"))

// Sparse vector for hybrid search
sparse := vectql.SparseVec(v.P("sparse_indices"), v.P("sparse_values"))
```

## Records

Records combine an ID, vector, and metadata for upsert operations:

```go
record := vectql.NewRecord(v.P("id"), vectql.Vec(v.P("embedding"))).
    WithMetadata(v.M("products", "category"), v.P("category")).
    WithMetadata(v.M("products", "price"), v.P("price")).
    Build()
```

## Filters

Filters constrain search results by metadata:

```go
// Simple equality
filter := v.Eq(v.M("products", "category"), v.P("category"))

// Comparison
filter := v.Gt(v.M("products", "price"), v.P("min_price"))

// Logical combinations
filter := v.And(
    v.Eq(v.M("products", "active"), v.P("active")),
    v.Or(
        v.Eq(v.M("products", "category"), v.P("cat1")),
        v.Eq(v.M("products", "category"), v.P("cat2")),
    ),
)
```

## Operations

VECTQL supports these vector database operations:

| Operation | Function | Description |
|-----------|----------|-------------|
| Search | `vectql.Search()` | Similarity search |
| Upsert | `vectql.Upsert()` | Insert or update vectors |
| Delete | `vectql.Delete()` | Remove vectors |
| Fetch | `vectql.Fetch()` | Retrieve by ID |
| Update | `vectql.Update()` | Update metadata |

## Builder Pattern

Queries are constructed using method chaining:

```go
result, err := vectql.Search(collection).  // Start with operation
    Vector(vec).                            // Set query vector
    Embedding(embedding).                   // Specify embedding field
    TopK(10).                               // Limit results
    Filter(filter).                         // Add metadata filter
    IncludeMetadata(true).                  // Include metadata in results
    Namespace(v.P("namespace")).            // Set namespace
    Render(pinecone.New())                  // Render for provider
```

## Instance Validation

The VECTQL instance validates all references at build time:

```go
v.C("products")           // Valid
v.C("nonexistent")        // Panics: collection not found

v.E("products", "embedding")  // Valid
v.E("products", "unknown")    // Panics: embedding not found

v.M("products", "category")   // Valid
v.M("products", "missing")    // Panics: metadata field not found

v.P("valid_name")         // Valid
v.P("invalid;name")       // Panics: invalid parameter name
```

Use `Try` variants for runtime validation:

```go
collection, err := v.TryC(userInput)
embedding, err := v.TryE(collection, fieldName)
```
